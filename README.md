# 커스텀 케이크 AI 스튜디오

Streamlit으로 구현된 상담 도구로, 맞춤 케이크 상담·견적을 돕고(Pro 버전은) AI 기반 디자인 브리프와 시안 이미지를 자동으로 만들어 줍니다.

## pro 버전 데모 링크
https://ai-preneur-mvp-jdpdxosh46btysm8zzglas.streamlit.app/

## 저장소 구성

```
app_basic.py   # 기본 상담·견적 버전
app_pro.py     # 고급 UX + 시안 자동 생성 버전
openai_key.txt # (선택) 로컬 API 키 보관 파일
```

## 기능 비교

| 기능 | `app_basic.py` (Basic) | `app_pro.py` (Pro) |
|------|------------------------|--------------------|
| 접수 폼 + 사이드바 주문 요약 | ✔ | ✔ |
| GPT 기반 의도 분석으로 주문서 자동 업데이트 | ✔ | ✔ (최신 Responses API 우선 사용) |
| 고객 참고 사진 업로드 | ✔ | ✔ (삭제 버튼 + 미리보기 포함) |
| 채팅 UX | 단순 스피너 | 입력 즉시 노출 + “답변 생성 중” 말풍선 + 채팅 영역 전용 로더 |
| 디자인 브리프 자동 생성 | ✖ | ✔ (주문 정보 + 맛별 무드 반영) |
| AI 시안 이미지 생성/다운로드 | ✖ | ✔ (DALL·E 3 사용) |
| “시안 자동 생성” 토글 및 진행 상태 표시 | ✖ | ✔ (사이드바에서 진행 중 안내 + 최신 시안 썸네일) |
| 최종 견적 다이얼로그 | 기본 정보만 표시 | 생성된 시안 이미지 자동 포함 |

## 빠른 시작

1. **의존성 설치**
   ```bash
   python -m venv .venv
   .\.venv\Scripts\activate
   pip install streamlit openai
   ```
2. **OpenAI API 키 설정**
   - 환경 변수: `setx OPENAI_API_KEY "sk-..."` (PowerShell 기준)  
   - 또는 `openai_key.txt` 파일에 키를 한 줄로 저장.
3. **Basic 버전 실행**
   ```bash
   streamlit run app_basic.py
   ```
   → 채팅 기반 상담, 가격 계산, 수동 디자인 조정이 필요할 때 적합합니다.
4. **Pro 버전 실행**
   ```bash
   streamlit run app_pro.py
   ```
   → 고급 채팅 UX와 자동 디자인/시안 생성이 필요할 때 사용하세요. 사이드바의 “시안 자동 생성” 토글을 켜면 각 메시지마다 새 브리프·시안을 만들어 줍니다.

## 설정 팁

- **메뉴·스케줄 수정**: 두 스크립트 모두 `MENU`, `SCHEDULE` 딕셔너리를 사용하므로 매장 정보에 맞게 편집하면 됩니다.
- **언어/브랜딩**: 기본 UI 문구는 한국어입니다. 필요 시 문자열을 원하는 언어로 변경하세요.
- **모델 선택**: Pro 버전은 `gpt-5-nano`(Responses/Chat)와 `dall-e-3` 이미지를 기본값으로 사용하며, 권한 문제 시 자동으로 대체 모델을 시도합니다.
- **이미지 업로드 요금**: 업로드 상태는 `st.session_state.uploaded_img`에 저장되며, 제거하면 추가 요금도 바로 빠집니다.

## 권장 사용 흐름

1. 인테이크 폼에서 필수 정보를 입력해 기본 주문서를 마련합니다.
2. 채팅 단계로 이동합니다.
   - Basic: 메시지를 보내면 GPT가 차례대로 답변합니다.
   - Pro: 사용자의 말풍선이 즉시 표시되고, AI 말풍선이 “💡 답변 생성 중...”(+“🖼️ 시안 생성 중...”)으로 진행 상황을 알려줍니다.
3. 상담이 진행될수록 사이드바 견적서와 가격이 자동으로 갱신됩니다.
4. **최종 견적서 보기** 버튼으로 모든 정보를 확인하고, 최신 시안까지 검토한 뒤 주문을 확정합니다.

AI와 함께 더 빠르고 정확한 케이크 상담을 경험해 보세요!
